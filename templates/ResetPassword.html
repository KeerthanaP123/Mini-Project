{% extends 'base.html' %}
{% load static %}


{% block content %}
<html lang="en">
  <head>
  	<title>Login </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">

	<!--<link rel="stylesheet" href="{% static 'https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' %}">!-->

	<link rel="stylesheet" href="{% static 'assets/css/style.css' %}">

	</head>
  <section class="ftco-section">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-md-6 text-center mb-5">
				</div>
			</div>
			<div class="row justify-content-center">
				<div class="col-md-6 col-lg-4">
					<div class="login-wrap py-5">
							<h3 class="text-center mb-0">Reset Password</h3>
						<p class="text-center"></p>

<!--<section class="w3l-hotair-form">-->
<!--	&lt;!&ndash; <h1>Report Login Form</h1> &ndash;&gt;-->
<!--	<div class="container">-->
<!--		&lt;!&ndash; /form &ndash;&gt;-->
<!--	-->
<!--			<div class="single">  -->
<!--				<div class="form-container">-->
<!--					<h2>Reset Password</h2>-->
					<!-- <form onsubmit="return validatee()" action="{% url 'login' %}" method="post" id="logform" -->
					<form onsubmit="return resetValidate()" action="{% url 'resetPassword' %}" method="post"
						id="logform" name="logform">
						<!-- {{error}} -->
						{% include 'Message.html' %}
						{% csrf_token %}
<!--						<div class="form-group">-->
<!--		      			<div class="icon d-flex align-items-center justify-content-center"></div>-->
<!--								<input type="password" class="form-control" id="password" name="password"-->
<!--								placeholder="New Password" onkeyup='passwordValidation(this)' required/>-->
<!--							<span class="error-msg" id="log-passwd"> </span><br>-->
<!--		      		</div>-->
<!--							<div class="form-group">-->
<!--		      			<div class="icon d-flex align-items-center justify-content-center"></div>-->
<!--								<input type="password" class="form-control" id="confirm_password" name="confirm_password"-->
<!--								placeholder="Confirm Password" onkeyup='cpasswordValidation(this)' required/>-->
<!--							<span class="error-msg" id="log-confirm"> </span><br>-->
<!--		      		</div>-->
						<div class="form-group">
<!--							<label class="col-md-3 control-lable" for="New Password">New Password</label>-->
							<div class="icon d-flex align-items-center justify-content-center"></div>
							<input type="password" class="form-control" id="password" name="password"
								placeholder="Password" onkeyup="passwordValidation(this)" required/>

							<span class="text-danger" id="log-passwd"> </span><br>

							</div>
						<div class="form-group">
							<div class="icon d-flex align-items-center justify-content-center"></div>
<!--							<label class="col-md-3 control-lable" for="Confirm Password">Confirm Password</label>-->
							<input type="password" class="form-control" id="confirm_password" name="confirm_password"
								placeholder="Confirm Password"  onkeyup="cpasswordValidation(this)" required/>
							<span class="text-danger" id="log-confirm"> </span><br>
						</div>
						<div class="row">
							<div class="form-actions floatRight">
								<input type="submit" value="Reset Password" class="btn btn-primary btn-sm">
							</div>
						</div>
		
					</form>

					<p class="account">Don't have an account? <a href="{% url 'reg' %}">Register</a></p>
				</div>
				<div class="w3l_form align-self">
					<div class="left_grid_info">
						<img src="{% static 'img/log2.jpg' %}" alt="" class="img-fluid">
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
<script type="text/javascript">
    function resetValidate() {
        var val = document.getElementById('password').value;
            if(val=="")
            {
                document.getElementById('log-passwd').innerHTML="**Password can't be null!!";
                return false;
            }
            else{
                document.getElementById('log-passwd').value = "";
            }
            if (!val.match(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{5,}/))
            {
                document.getElementById('log-passwd').innerHTML="**Must contain at least one number and one uppercase and lowercase letter and aleast 5 characters'";
                return false;
            }
            else{
                document.getElementById('log-passwd').value = "";
            }

            var val = document.getElementById('confirm_password').value;
            if(val=="")
                {
                    document.getElementById('log-confirm').innerHTML="**Password can't be null!!";
                    return false;
                }
                else{
                document.getElementById('log-confirm').value = "";
            }

            if(val != document.getElementById('password').value){
            document.getElementById('log-confirm').innerHTML="**passwords should be matching";
            return false;
            }
            else{
            document.getElementById('log-confirm').innerHTML="";
            }
    }

    function passwordValidation(inputTxt){

    var regx = /(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{5,}/;
    var textField = document.getElementById("password");

    if(inputTxt.value != '' ){
            if(inputTxt.value.match(regx)){
                textField.textContent = '';
                textField.style.color = "green";

            }else{
                textField.textContent = 'Must contain at least one number and one uppercase and lowercase letter and aleast 5 characters';
                textField.style.color = "red";
            }
    }else{
        textField.textContent = '**Password cannot be null!!';
        textField.style.color = "red";
    }
}

function cpasswordValidation(inputTxt){

    var regx =  document.getElementById("confirm_password").value;
    var regy =  document.getElementById("password").value;
    var textField = document.getElementById("log-confirm");

    if(inputTxt.value != '' ){
            if(regx == regy){
                textField.textContent = '';
                textField.style.color = "green";

            }else{
                textField.textContent = '**password should be matching';
                textField.style.color = "red";
            }
    }else{
        textField.textContent = '**Password cannot be null!!';
        textField.style.color = "red";
    }
}

</script>




{% endblock  %}
